        #region Barangay Officials

        private void ShowBarangayOfficials()
        {
            contentPanel.Controls.Clear();

            Label title = new Label
            {
                Text = "??? Barangay Officials Directory",
                Font = new Font("Segoe UI", 20F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 30),
                Size = new Size(500, 35)
            };

            FlowLayoutPanel officialsFlow = new FlowLayoutPanel
            {
                Location = new Point(30, 90),
                Size = new Size(contentPanel.Width - 60, contentPanel.Height - 120),
                AutoScroll = true
            };

            var officials = EnhancedDatabaseHelper.GetAllOfficials(true);
            foreach (var official in officials)
            {
                Panel officialCard = CreateOfficialCard(official);
                officialsFlow.Controls.Add(officialCard);
            }

            if (!officials.Any())
            {
                Label noOfficials = new Label
                {
                    Text = "No officials information available.",
                    Font = new Font("Segoe UI", 12F),
                    ForeColor = Color.FromArgb(108, 117, 125),
                    Location = new Point(30, 90),
                    Size = new Size(500, 30)
                };
                contentPanel.Controls.Add(noOfficials);
            }

            contentPanel.Controls.AddRange(new Control[] { title, officialsFlow });
        }

        private Panel CreateOfficialCard(BarangayOfficial official)
        {
            Panel card = new Panel
            {
                Size = new Size(350, 280),
                BackColor = Color.White,
                Margin = new Padding(10)
            };
            card.Paint += (s, e) => DrawCardShadow(card, e);

            // Avatar placeholder
            Panel avatar = new Panel
            {
                Size = new Size(80, 80),
                Location = new Point(135, 20),
                BackColor = Color.FromArgb(40, 167, 69)
            };
            avatar.Paint += (s, e) => {
                e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
                using (Brush brush = new SolidBrush(avatar.BackColor))
                {
                    e.Graphics.FillEllipse(brush, 0, 0, avatar.Width, avatar.Height);
                }
                using (Font font = new Font("Segoe UI", 32F, FontStyle.Bold))
                using (Brush textBrush = new SolidBrush(Color.White))
                {
                    string initial = official.FullName.Substring(0, 1).ToUpper();
                    SizeF textSize = e.Graphics.MeasureString(initial, font);
                    e.Graphics.DrawString(initial, font, textBrush, 
                        (avatar.Width - textSize.Width) / 2, (avatar.Height - textSize.Height) / 2);
                }
            };

            Label nameLabel = new Label
            {
                Text = official.FullName,
                Font = new Font("Segoe UI", 14F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(20, 110),
                Size = new Size(310, 25),
                TextAlign = ContentAlignment.MiddleCenter
            };

            Label positionLabel = new Label
            {
                Text = official.Position,
                Font = new Font("Segoe UI", 11F, FontStyle.Italic),
                ForeColor = Color.FromArgb(40, 167, 69),
                Location = new Point(20, 135),
                Size = new Size(310, 22),
                TextAlign = ContentAlignment.MiddleCenter
            };

            Label deptLabel = new Label
            {
                Text = official.Department,
                Font = new Font("Segoe UI", 10F),
                ForeColor = Color.FromArgb(108, 117, 125),
                Location = new Point(20, 160),
                Size = new Size(310, 20),
                TextAlign = ContentAlignment.MiddleCenter
            };

            Label contactLabel = new Label
            {
                Text = $"?? {official.ContactNumber}",
                Font = new Font("Segoe UI", 9F),
                ForeColor = Color.FromArgb(73, 80, 87),
                Location = new Point(20, 190),
                Size = new Size(310, 20),
                TextAlign = ContentAlignment.MiddleCenter
            };

            Label emailLabel = new Label
            {
                Text = $"?? {official.Email}",
                Font = new Font("Segoe UI", 9F),
                ForeColor = Color.FromArgb(73, 80, 87),
                Location = new Point(20, 210),
                Size = new Size(310, 20),
                TextAlign = ContentAlignment.MiddleCenter
            };

            Button viewDetailsBtn = new Button
            {
                Text = "View Full Profile",
                Font = new Font("Segoe UI", 10F),
                Location = new Point(75, 240),
                Size = new Size(200, 30),
                BackColor = Color.FromArgb(0, 123, 255),
                ForeColor = Color.White,
                FlatStyle = FlatStyle.Flat,
                Cursor = Cursors.Hand
            };
            viewDetailsBtn.FlatAppearance.BorderSize = 0;
            viewDetailsBtn.Click += (s, e) => ShowOfficialDetails(official);

            card.Controls.AddRange(new Control[] { 
                avatar, nameLabel, positionLabel, deptLabel, contactLabel, emailLabel, viewDetailsBtn 
            });

            return card;
        }

        private void ShowOfficialDetails(BarangayOfficial official)
        {
            Form detailsForm = new Form
            {
                Text = $"{official.FullName} - Profile",
                Size = new Size(600, 500),
                StartPosition = FormStartPosition.CenterScreen,
                BackColor = Color.White
            };

            string details = $@"
OFFICIAL PROFILE

Name: {official.FullName}
Position: {official.Position}
Department: {official.Department}

Contact Information:
Phone: {official.ContactNumber}
Email: {official.Email}
Address: {official.Address}

Term Details:
Start Date: {official.StartDate:MMMM dd, yyyy}
Status: {(official.IsActive ? "Active" : "Inactive")}

Responsibilities:
{official.Responsibilities}
            ";

            TextBox txtDetails = new TextBox
            {
                Text = details,
                Font = new Font("Consolas", 10F),
                Location = new Point(30, 30),
                Size = new Size(540, 380),
                Multiline = true,
                ReadOnly = true,
                ScrollBars = ScrollBars.Vertical,
                BorderStyle = BorderStyle.FixedSingle
            };

            Button closeBtn = new Button
            {
                Text = "Close",
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                Location = new Point(470, 420),
                Size = new Size(100, 35),
                BackColor = Color.FromArgb(108, 117, 125),
                ForeColor = Color.White,
                FlatStyle = FlatStyle.Flat
            };
            closeBtn.FlatAppearance.BorderSize = 0;
            closeBtn.Click += (s, e) => detailsForm.Close();

            detailsForm.Controls.AddRange(new Control[] { txtDetails, closeBtn });
            detailsForm.ShowDialog();
        }

        #endregion

        #region Submit Request

        private void ShowSubmitRequest()
        {
            contentPanel.Controls.Clear();

            Label title = new Label
            {
                Text = "?? Submit Document Request",
                Font = new Font("Segoe UI", 20F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 30),
                Size = new Size(500, 35)
            };

            Panel formPanel = new Panel
            {
                Location = new Point(30, 90),
                Size = new Size(700, 500),
                BackColor = Color.White
            };
            formPanel.Paint += (s, e) => DrawCardShadow(formPanel, e);

            Label lblType = new Label
            {
                Text = "Request Type *",
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 30),
                Size = new Size(150, 22)
            };

            ComboBox cmbRequestType = new ComboBox
            {
                Font = new Font("Segoe UI", 11F),
                Location = new Point(30, 57),
                Size = new Size(640, 30),
                DropDownStyle = ComboBoxStyle.DropDownList
            };
            cmbRequestType.Items.AddRange(new string[] {
                "Barangay Clearance",
                "Certificate of Residency",
                "Certificate of Indigency",
                "Business Permit",
                "Barangay ID",
                "Other Documents"
            });

            Label lblPurpose = new Label
            {
                Text = "Purpose *",
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 110),
                Size = new Size(150, 22)
            };

            TextBox txtPurpose = new TextBox
            {
                Font = new Font("Segoe UI", 11F),
                Location = new Point(30, 137),
                Size = new Size(640, 30),
                BorderStyle = BorderStyle.FixedSingle
            };

            Label lblDescription = new Label
            {
                Text = "Additional Details",
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 190),
                Size = new Size(200, 22)
            };

            TextBox txtDescription = new TextBox
            {
                Font = new Font("Segoe UI", 11F),
                Location = new Point(30, 217),
                Size = new Size(640, 100),
                BorderStyle = BorderStyle.FixedSingle,
                Multiline = true,
                ScrollBars = ScrollBars.Vertical
            };

            // Display fee information
            Label lblFeeInfo = new Label
            {
                Text = "?? Processing Fee: ?50.00",
                Font = new Font("Segoe UI", 10F, FontStyle.Italic),
                ForeColor = Color.FromArgb(40, 167, 69),
                Location = new Point(30, 335),
                Size = new Size(640, 22)
            };

            cmbRequestType.SelectedIndexChanged += (s, e) => {
                var settings = EnhancedDatabaseHelper.GetSystemSettings();
                if (settings.ServiceFees.ContainsKey(cmbRequestType.Text))
                {
                    lblFeeInfo.Text = $"?? Processing Fee: ?{settings.ServiceFees[cmbRequestType.Text]:N2}";
                }
            };

            Button btnSubmit = new Button
            {
                Text = "? Submit Request",
                Font = new Font("Segoe UI", 12F, FontStyle.Bold),
                Location = new Point(30, 380),
                Size = new Size(300, 45),
                BackColor = Color.FromArgb(40, 167, 69),
                ForeColor = Color.White,
                FlatStyle = FlatStyle.Flat,
                Cursor = Cursors.Hand
            };
            btnSubmit.FlatAppearance.BorderSize = 0;
            btnSubmit.Click += (s, e) => {
                if (cmbRequestType.SelectedIndex == -1)
                {
                    MessageBox.Show("Please select a request type.", "Validation Error", 
                        MessageBoxButtons.OK, MessageBoxIcon.Warning);
                    return;
                }

                if (string.IsNullOrWhiteSpace(txtPurpose.Text))
                {
                    MessageBox.Show("Please enter the purpose of your request.", "Validation Error", 
                        MessageBoxButtons.OK, MessageBoxIcon.Warning);
                    return;
                }

                var request = new Request
                {
                    UserId = currentUser.Id,
                    RequestType = cmbRequestType.Text,
                    Description = $"Purpose: {txtPurpose.Text}\n\nDetails: {txtDescription.Text}"
                };

                if (DatabaseHelper.CreateRequest(request))
                {
                    // Create notification
                    EnhancedDatabaseHelper.CreateNotification(new Notification
                    {
                        UserId = currentUser.Id,
                        Title = "Request Submitted",
                        Message = $"Your {request.RequestType} request has been submitted successfully.",
                        Type = "Success",
                        Category = "Request",
                        CreatedBy = currentUser.Id
                    });

                    EnhancedDatabaseHelper.LogActivity(currentUser.Id, "Submit Request", "Requests", 
                        $"Submitted {cmbRequestType.Text} request");

                    MessageBox.Show("Request submitted successfully! You will be notified once processed.", 
                        "Success", MessageBoxButtons.OK, MessageBoxIcon.Information);

                    ShowMyRequests();
                }
            };

            Button btnClear = new Button
            {
                Text = "Clear Form",
                Font = new Font("Segoe UI", 11F),
                Location = new Point(350, 380),
                Size = new Size(150, 45),
                BackColor = Color.FromArgb(108, 117, 125),
                ForeColor = Color.White,
                FlatStyle = FlatStyle.Flat,
                Cursor = Cursors.Hand
            };
            btnClear.FlatAppearance.BorderSize = 0;
            btnClear.Click += (s, e) => {
                cmbRequestType.SelectedIndex = -1;
                txtPurpose.Clear();
                txtDescription.Clear();
            };

            formPanel.Controls.AddRange(new Control[] {
                lblType, cmbRequestType, lblPurpose, txtPurpose,
                lblDescription, txtDescription, lblFeeInfo, btnSubmit, btnClear
            });

            contentPanel.Controls.AddRange(new Control[] { title, formPanel });
        }

        #endregion

        #region My Requests

        private void ShowMyRequests()
        {
            contentPanel.Controls.Clear();

            Label title = new Label
            {
                Text = "?? My Document Requests",
                Font = new Font("Segoe UI", 20F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 30),
                Size = new Size(500, 35)
            };

            // Filter panel
            Panel filterPanel = new Panel
            {
                Location = new Point(30, 80),
                Size = new Size(contentPanel.Width - 60, 50),
                BackColor = Color.White
            };
            filterPanel.Paint += (s, e) => DrawCardShadow(filterPanel, e);

            Label lblFilter = new Label
            {
                Text = "Filter:",
                Font = new Font("Segoe UI", 10F, FontStyle.Bold),
                Location = new Point(20, 15),
                Size = new Size(50, 20)
            };

            ComboBox cmbFilter = new ComboBox
            {
                Font = new Font("Segoe UI", 10F),
                Location = new Point(80, 12),
                Size = new Size(150, 25),
                DropDownStyle = ComboBoxStyle.DropDownList
            };
            cmbFilter.Items.AddRange(new string[] { "All", "Pending", "Approved", "Rejected", "Processing" });
            cmbFilter.SelectedIndex = 0;

            filterPanel.Controls.AddRange(new Control[] { lblFilter, cmbFilter });

            // Requests grid
            DataGridView dgvRequests = new DataGridView
            {
                Location = new Point(30, 150),
                Size = new Size(contentPanel.Width - 60, 400),
                BackgroundColor = Color.White,
                BorderStyle = BorderStyle.FixedSingle,
                AllowUserToAddRows = false,
                AllowUserToDeleteRows = false,
                ReadOnly = true,
                SelectionMode = DataGridViewSelectionMode.FullRowSelect,
                AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill,
                RowHeadersVisible = false,
                Font = new Font("Segoe UI", 10F)
            };

            dgvRequests.ColumnHeadersDefaultCellStyle.BackColor = Color.FromArgb(40, 167, 69);
            dgvRequests.ColumnHeadersDefaultCellStyle.ForeColor = Color.White;
            dgvRequests.ColumnHeadersDefaultCellStyle.Font = new Font("Segoe UI", 10F, FontStyle.Bold);
            dgvRequests.ColumnHeadersHeight = 40;
            dgvRequests.EnableHeadersVisualStyles = false;

            LoadMyRequests(dgvRequests);

            cmbFilter.SelectedIndexChanged += (s, e) => LoadMyRequests(dgvRequests, cmbFilter.Text);

            Button btnViewDetails = new Button
            {
                Text = "??? View Details",
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                Location = new Point(30, 570),
                Size = new Size(150, 40),
                BackColor = Color.FromArgb(0, 123, 255),
                ForeColor = Color.White,
                FlatStyle = FlatStyle.Flat,
                Cursor = Cursors.Hand
            };
            btnViewDetails.FlatAppearance.BorderSize = 0;
            btnViewDetails.Click += (s, e) => {
                if (dgvRequests.SelectedRows.Count > 0)
                {
                    int requestId = Convert.ToInt32(dgvRequests.SelectedRows[0].Cells["Id"].Value);
                    ShowRequestDetails(requestId);
                }
            };

            contentPanel.Controls.AddRange(new Control[] { 
                title, filterPanel, dgvRequests, btnViewDetails 
            });
        }

        private void LoadMyRequests(DataGridView dgv, string filter = "All")
        {
            var requests = DatabaseHelper.GetUserRequests(currentUser.Id);
            
            if (filter != "All")
                requests = requests.Where(r => r.Status == filter).ToList();

            var dataTable = new DataTable();
            dataTable.Columns.Add("Id", typeof(int));
            dataTable.Columns.Add("Request Type", typeof(string));
            dataTable.Columns.Add("Status", typeof(string));
            dataTable.Columns.Add("Date Submitted", typeof(DateTime));
            dataTable.Columns.Add("Date Processed", typeof(DateTime));

            foreach (var request in requests)
            {
                dataTable.Rows.Add(
                    request.Id,
                    request.RequestType,
                    request.Status,
                    request.CreatedDate,
                    request.ProcessedDate
                );
            }

            dgv.DataSource = dataTable;
            
            if (dgv.Columns["Id"] != null)
                dgv.Columns["Id"].Visible = false;

            // Color code status
            foreach (DataGridViewRow row in dgv.Rows)
            {
                string status = row.Cells["Status"].Value.ToString();
                switch (status)
                {
                    case "Pending":
                        row.DefaultCellStyle.BackColor = Color.FromArgb(255, 243, 205);
                        break;
                    case "Approved":
                        row.DefaultCellStyle.BackColor = Color.FromArgb(212, 237, 218);
                        break;
                    case "Rejected":
                        row.DefaultCellStyle.BackColor = Color.FromArgb(248, 215, 218);
                        break;
                }
            }
        }

        private void ShowRequestDetails(int requestId)
        {
            var requests = DatabaseHelper.GetUserRequests(currentUser.Id);
            var request = requests.FirstOrDefault(r => r.Id == requestId);

            if (request != null)
            {
                Form detailsForm = new Form
                {
                    Text = "Request Details",
                    Size = new Size(600, 400),
                    StartPosition = FormStartPosition.CenterScreen,
                    BackColor = Color.White
                };

                string details = $@"
REQUEST DETAILS

Request ID: #{request.Id}
Type: {request.RequestType}
Status: {request.Status}

Date Submitted: {request.CreatedDate:MMMM dd, yyyy HH:mm}
{(request.ProcessedDate.HasValue ? $"Date Processed: {request.ProcessedDate:MMMM dd, yyyy HH:mm}" : "")}

Description:
{request.Description}

{(request.Status == "Approved" ? "? Your request has been approved. You may claim your document at the barangay office." : "")}
{(request.Status == "Rejected" ? "? Your request has been rejected. Please contact the barangay office for more information." : "")}
                ";

                TextBox txtDetails = new TextBox
                {
                    Text = details,
                    Font = new Font("Consolas", 10F),
                    Location = new Point(30, 30),
                    Size = new Size(540, 280),
                    Multiline = true,
                    ReadOnly = true,
                    ScrollBars = ScrollBars.Vertical,
                    BorderStyle = BorderStyle.FixedSingle
                };

                Button closeBtn = new Button
                {
                    Text = "Close",
                    Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                    Location = new Point(470, 320),
                    Size = new Size(100, 35),
                    BackColor = Color.FromArgb(108, 117, 125),
                    ForeColor = Color.White,
                    FlatStyle = FlatStyle.Flat
                };
                closeBtn.FlatAppearance.BorderSize = 0;
                closeBtn.Click += (s, e) => detailsForm.Close();

                detailsForm.Controls.AddRange(new Control[] { txtDetails, closeBtn });
                detailsForm.ShowDialog();
            }
        }

        #endregion

        #region File Report

        private void ShowFileReport()
        {
            contentPanel.Controls.Clear();

            Label title = new Label
            {
                Text = "?? File a Report/Complaint",
                Font = new Font("Segoe UI", 20F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 30),
                Size = new Size(500, 35)
            };

            Panel formPanel = new Panel
            {
                Location = new Point(30, 90),
                Size = new Size(700, 500),
                BackColor = Color.White
            };
            formPanel.Paint += (s, e) => DrawCardShadow(formPanel, e);

            Label lblType = new Label
            {
                Text = "Report Type *",
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 30),
                Size = new Size(150, 22)
            };

            ComboBox cmbReportType = new ComboBox
            {
                Font = new Font("Segoe UI", 11F),
                Location = new Point(30, 57),
                Size = new Size(640, 30),
                DropDownStyle = ComboBoxStyle.DropDownList
            };
            cmbReportType.Items.AddRange(new string[] {
                "Noise Complaint",
                "Illegal Parking",
                "Garbage Issues",
                "Street Light Problem",
                "Road Damage",
                "Water/Drainage Issue",
                "Security Concern",
                "Other Issues"
            });

            Label lblSubject = new Label
            {
                Text = "Subject *",
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 110),
                Size = new Size(150, 22)
            };

            TextBox txtSubject = new TextBox
            {
                Font = new Font("Segoe UI", 11F),
                Location = new Point(30, 137),
                Size = new Size(640, 30),
                BorderStyle = BorderStyle.FixedSingle
            };

            Label lblDescription = new Label
            {
                Text = "Detailed Description *",
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 190),
                Size = new Size(200, 22)
            };

            TextBox txtDescription = new TextBox
            {
                Font = new Font("Segoe UI", 11F),
                Location = new Point(30, 217),
                Size = new Size(640, 150),
                BorderStyle = BorderStyle.FixedSingle,
                Multiline = true,
                ScrollBars = ScrollBars.Vertical
            };

            Button btnSubmit = new Button
            {
                Text = "?? Submit Report",
                Font = new Font("Segoe UI", 12F, FontStyle.Bold),
                Location = new Point(30, 390),
                Size = new Size(300, 45),
                BackColor = Color.FromArgb(220, 53, 69),
                ForeColor = Color.White,
                FlatStyle = FlatStyle.Flat,
                Cursor = Cursors.Hand
            };
            btnSubmit.FlatAppearance.BorderSize = 0;
            btnSubmit.Click += (s, e) => {
                if (cmbReportType.SelectedIndex == -1 || string.IsNullOrWhiteSpace(txtSubject.Text) || 
                    string.IsNullOrWhiteSpace(txtDescription.Text))
                {
                    MessageBox.Show("Please fill in all required fields.", "Validation Error", 
                        MessageBoxButtons.OK, MessageBoxIcon.Warning);
                    return;
                }

                var report = new Report
                {
                    UserId = currentUser.Id,
                    ReportType = cmbReportType.Text,
                    Subject = txtSubject.Text.Trim(),
                    Description = txtDescription.Text.Trim()
                };

                if (DatabaseHelper.CreateReport(report))
                {
                    EnhancedDatabaseHelper.CreateNotification(new Notification
                    {
                        UserId = currentUser.Id,
                        Title = "Report Submitted",
                        Message = $"Your report about '{report.Subject}' has been submitted.",
                        Type = "Info",
                        Category = "Report",
                        CreatedBy = currentUser.Id
                    });

                    EnhancedDatabaseHelper.LogActivity(currentUser.Id, "File Report", "Reports", 
                        $"Filed {cmbReportType.Text} report");

                    MessageBox.Show("Report submitted successfully! The barangay will review your concern.", 
                        "Success", MessageBoxButtons.OK, MessageBoxIcon.Information);

                    ShowMyReports();
                }
            };

            Button btnClear = new Button
            {
                Text = "Clear Form",
                Font = new Font("Segoe UI", 11F),
                Location = new Point(350, 390),
                Size = new Size(150, 45),
                BackColor = Color.FromArgb(108, 117, 125),
                ForeColor = Color.White,
                FlatStyle = FlatStyle.Flat,
                Cursor = Cursors.Hand
            };
            btnClear.FlatAppearance.BorderSize = 0;
            btnClear.Click += (s, e) => {
                cmbReportType.SelectedIndex = -1;
                txtSubject.Clear();
                txtDescription.Clear();
            };

            formPanel.Controls.AddRange(new Control[] {
                lblType, cmbReportType, lblSubject, txtSubject,
                lblDescription, txtDescription, btnSubmit, btnClear
            });

            contentPanel.Controls.AddRange(new Control[] { title, formPanel });
        }

        #endregion

        #region My Reports

        private void ShowMyReports()
        {
            contentPanel.Controls.Clear();

            Label title = new Label
            {
                Text = "?? My Reports & Complaints",
                Font = new Font("Segoe UI", 20F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 30),
                Size = new Size(500, 35)
            };

            DataGridView dgvReports = new DataGridView
            {
                Location = new Point(30, 90),
                Size = new Size(contentPanel.Width - 60, 400),
                BackgroundColor = Color.White,
                BorderStyle = BorderStyle.FixedSingle,
                AllowUserToAddRows = false,
                AllowUserToDeleteRows = false,
                ReadOnly = true,
                SelectionMode = DataGridViewSelectionMode.FullRowSelect,
                AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill,
                RowHeadersVisible = false,
                Font = new Font("Segoe UI", 10F)
            };

            dgvReports.ColumnHeadersDefaultCellStyle.BackColor = Color.FromArgb(220, 53, 69);
            dgvReports.ColumnHeadersDefaultCellStyle.ForeColor = Color.White;
            dgvReports.ColumnHeadersDefaultCellStyle.Font = new Font("Segoe UI", 10F, FontStyle.Bold);
            dgvReports.ColumnHeadersHeight = 40;
            dgvReports.EnableHeadersVisualStyles = false;

            LoadMyReports(dgvReports);

            contentPanel.Controls.AddRange(new Control[] { title, dgvReports });
        }

        private void LoadMyReports(DataGridView dgv)
        {
            var reports = DatabaseHelper.GetUserReports(currentUser.Id);

            var dataTable = new DataTable();
            dataTable.Columns.Add("Id", typeof(int));
            dataTable.Columns.Add("Type", typeof(string));
            dataTable.Columns.Add("Subject", typeof(string));
            dataTable.Columns.Add("Status", typeof(string));
            dataTable.Columns.Add("Date Filed", typeof(DateTime));
            dataTable.Columns.Add("Date Resolved", typeof(DateTime));

            foreach (var report in reports)
            {
                dataTable.Rows.Add(
                    report.Id,
                    report.ReportType,
                    report.Subject,
                    report.Status,
                    report.CreatedDate,
                    report.ResolvedDate
                );
            }

            dgv.DataSource = dataTable;
            
            if (dgv.Columns["Id"] != null)
                dgv.Columns["Id"].Visible = false;

            foreach (DataGridViewRow row in dgv.Rows)
            {
                string status = row.Cells["Status"].Value.ToString();
                if (status == "Resolved")
                    row.DefaultCellStyle.BackColor = Color.FromArgb(212, 237, 218);
                else
                    row.DefaultCellStyle.BackColor = Color.FromArgb(255, 243, 205);
            }
        }

        #endregion

        #region Barangay Information

        private void ShowBarangayInfo()
        {
            contentPanel.Controls.Clear();

            var settings = EnhancedDatabaseHelper.GetSystemSettings();

            Label title = new Label
            {
                Text = "?? Barangay Information",
                Font = new Font("Segoe UI", 20F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 30),
                Size = new Size(500, 35)
            };

            Panel infoPanel = new Panel
            {
                Location = new Point(30, 90),
                Size = new Size(contentPanel.Width - 60, 500),
                BackColor = Color.White,
                AutoScroll = true
            };
            infoPanel.Paint += (s, e) => DrawCardShadow(infoPanel, e);

            int yPos = 30;

            // Barangay Name
            AddInfoField(infoPanel, "??? Barangay Name", settings.BarangayName, ref yPos);
            AddInfoField(infoPanel, "?? Address", settings.Address, ref yPos);
            AddInfoField(infoPanel, "?? Contact Number", settings.ContactNumber, ref yPos);
            AddInfoField(infoPanel, "?? Email", settings.Email, ref yPos);

            // Separator
            Panel separator = new Panel
            {
                Location = new Point(30, yPos),
                Size = new Size(infoPanel.Width - 60, 2),
                BackColor = Color.FromArgb(222, 226, 230)
            };
            infoPanel.Controls.Add(separator);
            yPos += 30;

            Label officialsHeader = new Label
            {
                Text = "Key Officials",
                Font = new Font("Segoe UI", 14F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, yPos),
                Size = new Size(200, 25)
            };
            infoPanel.Controls.Add(officialsHeader);
            yPos += 40;

            AddInfoField(infoPanel, "?? Barangay Captain", settings.Captain, ref yPos);
            AddInfoField(infoPanel, "?? Secretary", settings.Secretary, ref yPos);
            AddInfoField(infoPanel, "?? Treasurer", settings.Treasurer, ref yPos);

            contentPanel.Controls.AddRange(new Control[] { title, infoPanel });
        }

        private void AddInfoField(Panel parent, string label, string value, ref int yPos)
        {
            Label lblLabel = new Label
            {
                Text = label,
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, yPos),
                Size = new Size(250, 22)
            };

            Label lblValue = new Label
            {
                Text = value ?? "Not available",
                Font = new Font("Segoe UI", 11F),
                ForeColor = Color.FromArgb(73, 80, 87),
                Location = new Point(300, yPos),
                Size = new Size(parent.Width - 350, 22)
            };

            parent.Controls.AddRange(new Control[] { lblLabel, lblValue });
            yPos += 40;
        }

        #endregion

        #region Profile

        private void ShowProfile()
        {
            contentPanel.Controls.Clear();

            Label title = new Label
            {
                Text = "?? My Profile",
                Font = new Font("Segoe UI", 20F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(30, 30),
                Size = new Size(500, 35)
            };

            Panel profilePanel = new Panel
            {
                Location = new Point(30, 90),
                Size = new Size(700, 450),
                BackColor = Color.White
            };
            profilePanel.Paint += (s, e) => DrawCardShadow(profilePanel, e);

            // Avatar
            Panel avatar = new Panel
            {
                Size = new Size(120, 120),
                Location = new Point(290, 30),
                BackColor = Color.FromArgb(0, 123, 255)
            };
            avatar.Paint += (s, e) => {
                e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
                using (Brush brush = new SolidBrush(avatar.BackColor))
                {
                    e.Graphics.FillEllipse(brush, 0, 0, avatar.Width, avatar.Height);
                }
                using (Font font = new Font("Segoe UI", 48F, FontStyle.Bold))
                using (Brush textBrush = new SolidBrush(Color.White))
                {
                    string initial = currentUser.FullName.Substring(0, 1).ToUpper();
                    SizeF textSize = e.Graphics.MeasureString(initial, font);
                    e.Graphics.DrawString(initial, font, textBrush, 
                        (avatar.Width - textSize.Width) / 2, (avatar.Height - textSize.Height) / 2);
                }
            };

            int yPos = 170;
            CreateProfileField(profilePanel, "Full Name:", currentUser.FullName, yPos);
            yPos += 45;
            CreateProfileField(profilePanel, "Username:", currentUser.Username, yPos);
            yPos += 45;
            CreateProfileField(profilePanel, "Email:", currentUser.Email ?? "Not provided", yPos);
            yPos += 45;
            CreateProfileField(profilePanel, "Contact:", currentUser.ContactNumber ?? "Not provided", yPos);
            yPos += 45;
            CreateProfileField(profilePanel, "Address:", currentUser.Address ?? "Not provided", yPos);
            yPos += 45;
            CreateProfileField(profilePanel, "Member Since:", currentUser.CreatedDate.ToString("MMMM dd, yyyy"), yPos);

            profilePanel.Controls.Add(avatar);
            contentPanel.Controls.AddRange(new Control[] { title, profilePanel });
        }

        private void CreateProfileField(Panel parent, string label, string value, int yPos)
        {
            Label lblLabel = new Label
            {
                Text = label,
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                ForeColor = Color.FromArgb(52, 58, 64),
                Location = new Point(100, yPos),
                Size = new Size(150, 22),
                TextAlign = ContentAlignment.MiddleRight
            };

            Label lblValue = new Label
            {
                Text = value,
                Font = new Font("Segoe UI", 11F),
                ForeColor = Color.FromArgb(73, 80, 87),
                Location = new Point(270, yPos),
                Size = new Size(350, 22)
            };

            parent.Controls.AddRange(new Control[] { lblLabel, lblValue });
        }

        #endregion

        private void Logout()
        {
            DialogResult result = MessageBox.Show("Are you sure you want to logout?", "Confirm Logout", 
                MessageBoxButtons.YesNo, MessageBoxIcon.Question);
            
            if (result == DialogResult.Yes)
            {
                EnhancedDatabaseHelper.LogActivity(currentUser.Id, "Logout", "Dashboard", "User logged out");
                this.Hide();
                new LoginForm().Show();
            }
        }
    }
}